<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yizhi.student.dao.StudentInfoDao">
    
    <select id="get" resultType="com.yizhi.student.domain.StudentInfoDO" parameterType="int">
        select * 
            from s_student_info 
        where
            id = #{id}
    </select>


    <select id="count" resultType="int">
        select count(*) from s_student_info 
    </select>


    <select id="list" resultType="com.yizhi.student.domain.StudentInfoDO">
        select * from s_student_info
        <where>
            <if test="tocollegeId != null and tocollegeId.trim() != ''" > and tocollege = #{tocollegeId} </if>
            <if test="tomajorId != null and tomajorId.trim() != ''" > and tomajor = #{tomajorId} </if>
            <if test="classId != null and classId.trim() != ''" > and class_id = #{classId} </if>
            <if test="name != null and name != '' and name.trim() != ''">
            <!-- 根据关键词name匹配所有可能性 -->
                and (
                    id like CONCAT('%', #{name}, '%')
                    or student_id like CONCAT('%', #{name}, '%')
                    or exam_id like CONCAT('%', #{name}, '%')
                    or class_id like CONCAT('%', #{name}, '%')
                    or student_name like CONCAT('%', #{name}, '%')
                    or certify like CONCAT('%', #{name}, '%')
                    or mail_address like CONCAT('%', #{name}, '%')
                    or foreign_lanaguage like CONCAT('%', #{name}, '%')
                    or student_sex like CONCAT('%', #{name}, '%')
                    or nation like CONCAT('%', #{name}, '%')
                    or political like CONCAT('%', #{name}, '%')
                    or card_id like CONCAT('%', #{name}, '%')
                    or telephone like CONCAT('%', #{name}, '%')
                    or subject_type like CONCAT('%', #{name}, '%')
                    or tocollege like CONCAT('%', #{name}, '%')
                    or tocampus like CONCAT('%', #{name}, '%')
                    or tomajor like CONCAT('%', #{name}, '%')
                    or birthplace like CONCAT('%', #{name}, '%')
                    or grade like CONCAT('%', #{name}, '%')
                    or isstate like CONCAT('%', #{name}, '%')
                    or birthday like CONCAT('%', #{name}, '%')
                    or note like CONCAT('%', #{name}, '%')
                    or add_time like CONCAT('%', #{name}, '%')
                    or add_userid like CONCAT('%', #{name}, '%')
                    or edit_time like CONCAT('%', #{name}, '%')
                    or edit_userid like CONCAT('%', #{name}, '%')
                )
            </if>
        </where>
    </select>


    <insert id="save" parameterType="com.yizhi.student.domain.StudentInfoDO">
        insert into s_student_info ( 
            id,
            student_id,
            exam_id,
            class_id,
            student_name,
            certify,
            mail_address,
            foreign_lanaguage,
            student_sex,
            nation,
            political,
            card_id,
            telephone,
            subject_type,
            tocollege,
            tocampus,
            tomajor,
            birthplace,
            grade,
            isstate,
            birthday,
            note,
            add_time,
            add_userid,
            edit_time,
            edit_userid
        ) 
        values 
        (
            #{id},
            #{studentId},
            #{examId},
            #{classId},
            #{studentName},
            #{certify},
            #{mailAddress},
            #{foreignLanaguage},
            #{studentSex},
            #{nation},
            #{political},
            #{cardId},
            #{telephone},
            #{subjectType},
            #{tocollege},
            #{tocampus},
            #{tomajor},
            #{birthplace},
            #{grade},
            #{isstate},
            #{birthday},
            #{note},
            #{addTime},
            #{addUserid},
            #{editTime},
            #{editUserid}
        )
    </insert>


    <update id="update" >
        update s_student_info 
        <set> 
            student_id = #{studentId}, 
            exam_id = #{examId}, 
            class_id = #{classId}, 
            student_name = #{studentName}, 
            certify = #{certify}, 
            mail_address = #{mailAddress}, 
            foreign_lanaguage = #{foreignLanaguage}, 
            student_sex = #{studentSex}, 
            nation = #{nation}, 
            political = #{political}, 
            card_id = #{cardId}, 
            telephone = #{telephone}, 
            subject_type = #{subjectType}, 
            tocollege = #{tocollege}, 
            tocampus = #{tocampus}, 
            tomajor = #{tomajor}, 
            birthplace = #{birthplace}, 
            grade = #{grade}, 
            isstate = #{isstate}, 
            birthday = #{birthday}, 
            note = #{note}, 
            add_time = #{addTime}, 
            add_userid = #{addUserid}, 
            edit_time = #{editTime}, 
            edit_userid = #{editUserid}
        </set>
        where id = #{id}
    </update> 


    <delete id="remove">
        delete from s_student_info 
        where id = #{id}
    </delete> 


    <delete id="batchRemove">
        delete from s_student_info where id in
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>


</mapper>